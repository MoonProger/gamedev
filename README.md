üöÄ Backend Week 1 ‚Äî HTTP + WebSocket foundation
üìå –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
1Ô∏è‚É£ Backend core

–ù–∞—Å—Ç—Ä–æ–µ–Ω Express —Å–µ—Ä–≤–µ—Ä

–ü–æ–¥–∫–ª—é—á–µ–Ω–∞ PostgreSQL (—á–µ—Ä–µ–∑ Prisma v7 + adapter-pg)

–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –º–æ–¥—É–ª—å–Ω—ã–π backend (auth, rooms, ws, game)

2Ô∏è‚É£ Auth —Å–∏—Å—Ç–µ–º–∞

POST /auth/register

POST /auth/login (–≤—ã–¥–∞—ë—Ç JWT)

GET /auth/me (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞)

–ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ hash (bcrypt)

JWT middleware –¥–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

3Ô∏è‚É£ Rooms API (Lobby)

POST /rooms (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã)

GET /rooms

GET /rooms/:id

POST /rooms/:id/join

POST /rooms/:id/leave

POST /rooms/:id/ready

–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:

creator

players

settings

status

ready state –∏–≥—Ä–æ–∫–æ–≤

4Ô∏è‚É£ WebSocket —Å–µ—Ä–≤–µ—Ä

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

ws://localhost:4000/ws?token=<JWT>
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ JWT

–ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–∫–µ—Ç–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ

Broadcast –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–Ω–∞—Ç—ã

–°–æ–±—ã—Ç–∏—è:

room.join

room.leave

room.ready

room.state

room.player_joined

room.player_left

5Ô∏è‚É£ –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π game engine)

–ß–µ—Ä–µ–∑ WebSocket:

Client ‚Üí Server:

game.start

game.roll_dice

game.move

Server ‚Üí Client:

game.started

game.dice_rolled

game.token_moved

game.turn_changed

game.state

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

–û—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å —Ö–æ–¥–æ–≤

–ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞ (1‚Äì6)

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∑—ã —Ö–æ–¥–∞

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Ñ–∏—à–∫–∏

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤

üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Prisma ORM

Adapter-based connection (Prisma v7)

JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

WS —Å–ª–æ–π –æ—Ç–¥–µ–ª—ë–Ω –æ—Ç game logic

Game state —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø–æ roomId

Room state –∏ Game state —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ broadcast

‚úÖ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

npm run dev

HTTP:

–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è

–∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è

—Å–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É

WebSocket:

–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —Ç–æ–∫–µ–Ω–æ–º

room.join

room.ready

game.start

game.roll_dice

game.move

üéØ –ò—Ç–æ–≥ –Ω–µ–¥–µ–ª–∏ 1

‚úî –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
‚úî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞—é—Ç
‚úî API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
‚úî WebSocket —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
‚úî –ò–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏

Backend –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å:

Unity (–¥–≤–∏–∂–µ–Ω–∏–µ —Ñ–∏—à–∫–∏, –∞–Ω–∏–º–∞—Ü–∏—è –∫—É–±–∏–∫–∞)

React (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞/–ª–æ–±–±–∏)